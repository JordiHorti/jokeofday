{"version":3,"file":"data_request_modal.min.js","sources":["../src/data_request_modal.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Request actions.\n *\n * @module     tool_dataprivacy/data_request_modal\n * @copyright  2018 Jun Pataleta\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport $ from 'jquery';\nimport * as CustomEvents from 'core/custom_interaction_events';\nimport Modal from 'core/modal';\nimport DataPrivacyEvents from './events';\n\nconst SELECTORS = {\n    APPROVE_BUTTON: '[data-action=\"approve\"]',\n    DENY_BUTTON: '[data-action=\"deny\"]',\n    COMPLETE_BUTTON: '[data-action=\"complete\"]',\n    APPROVE_REQUEST_SELECT_COURSE: '[data-action=\"approve-selected-courses\"]',\n};\n\nexport default class ModalDataRequest extends Modal {\n    static TYPE = 'tool_dataprivacy-data_request';\n    static TEMPLATE = 'tool_dataprivacy/data_request_modal';\n\n    /**\n     * Set up all of the event handling for the modal.\n     */\n    registerEventListeners() {\n        // Apply parent event listeners.\n        super.registerEventListeners(this);\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.APPROVE_BUTTON, (e, data) => {\n            const approveEvent = $.Event(DataPrivacyEvents.approve);\n            this.getRoot().trigger(approveEvent, this);\n\n            if (!approveEvent.isDefaultPrevented()) {\n                this.hide();\n                data.originalEvent.preventDefault();\n            }\n        });\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.DENY_BUTTON, (e, data) => {\n            const denyEvent = $.Event(DataPrivacyEvents.deny);\n            this.getRoot().trigger(denyEvent, this);\n\n            if (!denyEvent.isDefaultPrevented()) {\n                this.hide();\n                data.originalEvent.preventDefault();\n            }\n        });\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.COMPLETE_BUTTON, (e, data) => {\n            const completeEvent = $.Event(DataPrivacyEvents.complete);\n            this.getRoot().trigger(completeEvent, this);\n\n            if (!completeEvent.isDefaultPrevented()) {\n                this.hide();\n                data.originalEvent.preventDefault();\n            }\n        });\n\n        this.getModal().on(CustomEvents.events.activate, SELECTORS.APPROVE_REQUEST_SELECT_COURSE, (e, data) => {\n            let approveSelectCoursesEvent = $.Event(DataPrivacyEvents.approveSelectCourses);\n            this.getRoot().trigger(approveSelectCoursesEvent, this);\n\n            if (!approveSelectCoursesEvent.isDefaultPrevented()) {\n                this.hide();\n                data.originalEvent.preventDefault();\n            }\n        });\n\n    }\n}\n\nModalDataRequest.registerModalType();\n"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","__esModule","default","_jquery","CustomEvents","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_interopRequireWildcard","_modal","_events","SELECTORS","ModalDataRequest","Modal","static","registerEventListeners","super","this","getModal","on","events","activate","data","approveEvent","$","Event","DataPrivacyEvents","approve","getRoot","trigger","isDefaultPrevented","hide","originalEvent","preventDefault","denyEvent","deny","completeEvent","complete","approveSelectCoursesEvent","approveSelectCourses","_exports","registerModalType"],"mappings":"mLA0ByC,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAJ,GAAAA,OAAAA,GAAAA,EAAAK,WAAAL,EAAAM,CAAAA,QAAAN,EAAA;;;;;;;qFAHzCO,QAAAH,uBAAAG,SACAC,aAEyC,SAAAR,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAK,WAAAL,OAAAA,EAAAA,GAAAA,OAAAA,GAAAA,iBAAAA,GAAAA,mBAAAA,EAAAM,MAAAA,CAAAA,QAAAN,GAAAG,IAAAA,EAAAJ,yBAAAG,GAAA,GAAAC,GAAAA,EAAAM,IAAAT,GAAA,OAAAG,EAAAO,IAAAV,GAAA,IAAAW,EAAA,CAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAjB,EAAAiB,GAAAA,YAAAA,GAAAC,CAAAA,EAAAA,eAAAC,KAAAnB,EAAAiB,GAAAG,CAAAA,IAAAA,EAAAP,EAAAC,OAAAE,yBAAAhB,EAAAiB,GAAAG,KAAAA,IAAAA,EAAAV,KAAAU,EAAAC,KAAAP,OAAAC,eAAAJ,EAAAM,EAAAG,GAAAT,EAAAM,GAAAjB,EAAAiB,GAAAN,OAAAA,EAAAL,QAAAN,EAAAG,GAAAA,EAAAkB,IAAArB,EAAAW,GAAAA,CAAA,CAFzCW,CAAAd,cACAe,OAAAnB,uBAAAmB,QACAC,QAAApB,uBAAAoB,SAEA,MAAMC,yBACc,0BADdA,sBAEW,uBAFXA,0BAGe,2BAHfA,wCAI6B,2CAGpB,MAAMC,yBAAyBC,OAAAA,QAC1CC,YAAc,gCACdA,gBAAkB,sCAKlBC,sBAAAA,GAEIC,MAAMD,uBAAuBE,MAE7BA,KAAKC,WAAWC,GAAGzB,aAAa0B,OAAOC,SAAUV,0BAA0B,CAACzB,EAAGoC,QAC3E,MAAMC,aAAeC,QAAChC,QAACiC,MAAMC,QAAAA,QAAkBC,SAC/CV,KAAKW,UAAUC,QAAQN,aAAcN,MAEhCM,aAAaO,uBACdb,KAAKc,OACLT,KAAKU,cAAcC,iBACvB,IAGJhB,KAAKC,WAAWC,GAAGzB,aAAa0B,OAAOC,SAAUV,uBAAuB,CAACzB,EAAGoC,QACxE,MAAMY,UAAYV,QAAChC,QAACiC,MAAMC,QAAAA,QAAkBS,MAC5ClB,KAAKW,UAAUC,QAAQK,UAAWjB,MAE7BiB,UAAUJ,uBACXb,KAAKc,OACLT,KAAKU,cAAcC,iBACvB,IAGJhB,KAAKC,WAAWC,GAAGzB,aAAa0B,OAAOC,SAAUV,2BAA2B,CAACzB,EAAGoC,QAC5E,MAAMc,cAAgBZ,QAAChC,QAACiC,MAAMC,QAAAA,QAAkBW,UAChDpB,KAAKW,UAAUC,QAAQO,cAAenB,MAEjCmB,cAAcN,uBACfb,KAAKc,OACLT,KAAKU,cAAcC,iBACvB,IAGJhB,KAAKC,WAAWC,GAAGzB,aAAa0B,OAAOC,SAAUV,yCAAyC,CAACzB,EAAGoC,QAC1F,IAAIgB,0BAA4Bd,QAAChC,QAACiC,MAAMC,QAAAA,QAAkBa,sBAC1DtB,KAAKW,UAAUC,QAAQS,0BAA2BrB,MAE7CqB,0BAA0BR,uBAC3Bb,KAAKc,OACLT,KAAKU,cAAcC,iBACvB,GAGR,EAGiC,OAFpCO,SAAAhD,QAAAoB,iBAEDA,iBAAiB6B,oBAAoBD,SAAAhD,OAAA"}