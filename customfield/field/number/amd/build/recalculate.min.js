define("customfield_number/recalculate",["exports","core/ajax","core/notification","core/loadingicon","core/pending"],(function(_exports,_ajax,_notification,_loadingicon,_pending){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}
/**
   * Allows to recalculate a single value on demand
   *
   * @module     customfield_number/recalculate
   * @author     2024 Marina Glancy
   * @copyright  2024 Moodle Pty Ltd <support@moodle.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){if(initialised)return;document.addEventListener("click",(e=>{const target=e.target.closest(SELECTORS.wrapper+" "+SELECTORS.link);if(!target)return;const el=target.closest(SELECTORS.wrapper).querySelector(SELECTORS.value);if(!el)return;e.preventDefault();const{fieldid:fieldid,instanceid:instanceid}=target.dataset,pendingPromise=new _pending.default("recalculate_customfield_number");(0,_loadingicon.addIconToContainer)(el).then((()=>_ajax.default.call([{methodname:"customfield_number_recalculate_value",args:{fieldid:fieldid,instanceid:instanceid}}])[0])).then((data=>(el.innerHTML=data.value,pendingPromise.resolve()))).catch(_notification.default.exception)})),initialised=!0},_ajax=_interopRequireDefault(_ajax),_notification=_interopRequireDefault(_notification),_pending=_interopRequireDefault(_pending);const SELECTORS={wrapper:'[data-fieldtype="wrapper"]',value:'[data-fieldtype="value"]',link:'[data-fieldtype="link"]'};let initialised=!1}));

//# sourceMappingURL=recalculate.min.js.map